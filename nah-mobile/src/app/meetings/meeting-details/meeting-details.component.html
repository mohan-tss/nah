<ng-container *ngIf="meeting">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start" class="white-color">
        <ion-back-button></ion-back-button>
        <ion-title class="ion-no-padding" style="font-size: 16px;">{{title}}</ion-title>
      </ion-buttons>
      <ion-row class="profile-settings text-10">
        <ion-icon style="cursor: pointer;" name="cog" color="light" (click)="actionMenu($event)"></ion-icon>
      </ion-row>
    </ion-toolbar>
  </ion-header>
  <ion-content>
    <ion-card>
      <ion-card-header class="ion-padding-b-5">
        <ion-row>
          <ion-col class="ion-no-padding">
            <ion-card-title style="font-size: 18px;">{{meeting.title}} </ion-card-title>
            <ion-card-subtitle class="ion-margin-t-0" color="danger">Say No To {{meeting.group.name}}
            </ion-card-subtitle>
          </ion-col>
          <ion-col class="ion-text-right ion-no-padding" size="4">
            <ion-button size="small" color="danger" *ngIf="meeting.isPublished==0" (click)="publishMeeting(meeting)">
              Publish
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-card-header>


      <ion-card-content>
        <ion-img class="ion-text-center m-height-250" [src]="meeting.imageUrl" style="height: 200px;"></ion-img>
        <ion-grid class="ion-no-padding">
          <ion-row class="ion-padding-t-5">
            <ion-col class="ion-no-padding">
              {{meeting.agenda}}
            </ion-col>
          </ion-row>
          <ion-row class="ion-padding-t-5">
            <ion-col class="ion-no-padding">
              {{meeting.contactInfo}}
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="6" class="ion-no-padding">
              <ion-icon name="calendar"></ion-icon> {{meeting.meetingDate | date:"mediumDate"}}
            </ion-col>
            <ion-col size="6" class="ion-no-padding">
              <ion-icon name="alarm"></ion-icon> {{meeting.startTime | date:'shortTime'}} -
              {{meeting.endTime | date:'shortTime'}}
            </ion-col>
            <ion-col class="ion-no-padding">
              <ion-icon name="pin"></ion-icon>{{meeting?.location}} {{meeting?.city?.name}}
            </ion-col>
          </ion-row>
          <ion-row class="ion-nowrap">
            <app-peoples-icons [peoples]="meeting.members" label="Members are Following"></app-peoples-icons>
          </ion-row>
          <ion-row>
            <ion-tabs>
              <ion-tab-bar>
                <!-- <ion-tab-button (click)="activeTab='members'">
                  <ion-label>Peoples</ion-label>
                </ion-tab-button> -->
                <ion-tab-button [ngClass]="{'active': activeTab=='images'}" (click)="activeTab='images'">
                  <ion-label>Images</ion-label>
                </ion-tab-button>
                <ion-tab-button [ngClass]="{'active': activeTab=='videos'}" (click)="activeTab='videos'">
                  <ion-label>Videos</ion-label>
                </ion-tab-button>
              </ion-tab-bar>
            </ion-tabs>
          </ion-row>

          <ng-container [ngSwitch]="activeTab">
            <ng-container *ngSwitchCase="'images'">
              <ion-row class="ion-nowrap">
                <ion-col>


                  <ion-list class="image-list">
                    <ion-img-viewer class="image-thumb" *ngFor="let item of meeting.photos" [title]="meeting.title"
                      scheme="dark" [src]="item.imagePath">
                    </ion-img-viewer>
                    <!-- <ion-img class="image-thumb" *ngFor="let item of meeting.photos" [src]="item.imagePath"></ion-img> -->

                    <form [formGroup]="form">
                      <formly-form [form]="form" [fields]="fields" [model]="imageModel">
                      </formly-form>
                    </form>
                  </ion-list>
                </ion-col>

              </ion-row>
            </ng-container>
            <ng-container *ngSwitchCase="'videos'">
              <app-meeting-videos [videos]="meeting.videos" [meetingId]="meeting.id"></app-meeting-videos>
            </ng-container>
            <ng-container *ngSwitchDefault>
              members
            </ng-container>
          </ng-container>

          <ion-row>
            <h3 style="color: #000;font-weight: bold;">COMMENTS</h3>


            <ion-list class="meeting-list meeting-list-d" *ngFor="let c of meeting.comments">
              <ion-grid class="meeting-item ion-no-padding">
                <ion-row class="ion-nowrap">
                  <ion-col size="2" class="img-left ion-no-padding">
                    <ion-avatar class="avater">
                      <img [src]="c.createdBy.imageUrl" />
                    </ion-avatar>
                  </ion-col>
                  <ion-col size="6" class="ion-no-padding">
                    <!-- <ion-label class="meeting-title" style="display: block;color: #000;">Let's gather our barriors
                    </ion-label> -->
                    <ion-label class="meeting-sub-title">{{c.comment}}</ion-label>
                  </ion-col>
                  <ion-col size="4" class="ion-no-padding ion-text-right">
                    <label class="meeting-date" timeago [date]="c.updatedDate"></label>
                  </ion-col>
              
                </ion-row>
                <ion-row *ngFor="let rc of c.replys">
                  <ion-chip>
                    <ion-avatar>
                      <img [src]="rc.createdBy.imageUrl">
                    </ion-avatar>
                    <ion-label>{{rc.comment}}</ion-label>
                  </ion-chip>
                </ion-row>
                <ion-row (click)="replyComment(c)">
                  <ion-col size="4" class="ion-no-padding ion-text-right">
                    <ion-icon name="repeat"></ion-icon>
                    <label>Reply</label>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-list>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </ion-content>
</ng-container>
<ion-footer *ngIf="meeting">
  <ion-list class="meeting-list meeting-list-d">
    <ion-grid class="meeting-item ion-no-padding">
      <ion-row *ngIf="replyMsg.id">
        <ion-chip>

          <ion-text color="dark">
            <h3>{{replyMsg.comment}}</h3>
          </ion-text>
          <ion-icon (click)="clearReply()" name="close-circle-outline"></ion-icon>
        </ion-chip>
      </ion-row>
      <ion-row class="ion-nowrap ion-align-items-center">
        <ion-col size="2" class="img-left">
          <ion-avatar class="avater" style="margin: 0 auto;">
            <img [src]="googlePic" />
          </ion-avatar>
        </ion-col>
        <ion-col size="7" class="">
          <ion-textarea class="border" style="margin: 0;" [(ngModel)]="commentMsg" placeholder="Enter Comments">
          </ion-textarea>
        </ion-col>
        <ion-col size="3" class="ion-text-center">
          <ion-button size="small" color="danger" (click)="addComment(commentMsg)" [disabled]="!commentMsg">
            Send
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>

  </ion-list>
</ion-footer>